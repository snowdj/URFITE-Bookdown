<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2.6 An Application to the Gender Gap of Earnings | Introduction to Econometrics with R</title>
  <meta name="description" content="Beginners with little background in statistics and econometrics often have a hard time understanding the benefits of having programming skills for learning and applying Econometrics. ‘Introduction to Econometrics with R’ is an interactive companion to the well-received textbook ‘Introduction to Econometrics’ by James H. Stock and Mark W. Watson (2015). It gives a gentle introduction to the essentials of R programming and guides students in implementing the empirical applications presented throughout the textbook using the newly aquired skills. This is supported by interactive programming exercises generated with DataCamp Light and integration of interactive visualizations of central concepts which are based on the flexible JavaScript library D3.js." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="2.6 An Application to the Gender Gap of Earnings | Introduction to Econometrics with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://www.econometrics-with-r.org/" />
  <meta property="og:image" content="https://www.econometrics-with-r.org/images/cover.png" />
  <meta property="og:description" content="Beginners with little background in statistics and econometrics often have a hard time understanding the benefits of having programming skills for learning and applying Econometrics. ‘Introduction to Econometrics with R’ is an interactive companion to the well-received textbook ‘Introduction to Econometrics’ by James H. Stock and Mark W. Watson (2015). It gives a gentle introduction to the essentials of R programming and guides students in implementing the empirical applications presented throughout the textbook using the newly aquired skills. This is supported by interactive programming exercises generated with DataCamp Light and integration of interactive visualizations of central concepts which are based on the flexible JavaScript library D3.js." />
  <meta name="github-repo" content="mca91/EconometricsWithR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2.6 An Application to the Gender Gap of Earnings | Introduction to Econometrics with R" />
  
  <meta name="twitter:description" content="Beginners with little background in statistics and econometrics often have a hard time understanding the benefits of having programming skills for learning and applying Econometrics. ‘Introduction to Econometrics with R’ is an interactive companion to the well-received textbook ‘Introduction to Econometrics’ by James H. Stock and Mark W. Watson (2015). It gives a gentle introduction to the essentials of R programming and guides students in implementing the empirical applications presented throughout the textbook using the newly aquired skills. This is supported by interactive programming exercises generated with DataCamp Light and integration of interactive visualizations of central concepts which are based on the flexible JavaScript library D3.js." />
  <meta name="twitter:image" content="https://www.econometrics-with-r.org/images/cover.png" />

<meta name="author" content="Christoph Hanck, Martin Arnold, Alexander Gerber, and Martin Schmelzer" />


<meta name="date" content="2020-07-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="2-5-cmfdp.html"/>
<link rel="next" href="2-7-scatterplots-sample-covariance-and-sample-correlation.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<!-- font families -->

<link href="https://fonts.googleapis.com/css?family=PT+Sans|Pacifico|Source+Sans+Pro" rel="stylesheet">

<script src="js/hideOutput.js"></script>

<!-- Mathjax -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/default.js"></script>

 <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        extensions: ["tex2jax.js", "TeX/AMSmath.js"],
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
        jax: ["input/TeX","output/CommonHTML"]
      });
      MathJax.Hub.processSectionDelay = 0;
  </script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110299877-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-110299877-1');
</script>

<!-- open review block -->

<script async defer src="https://hypothes.is/embed.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><center><img src="images/logo.png" alt="logo" width="50%" height="50%"style="margin: 15px 0 0 0"></center></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-introduction.html"><a href="1-introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="1-1-a-very-short-introduction-to-r-and-rstudio.html"><a href="1-1-a-very-short-introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1.1</b> A Very Short Introduction to <tt>R</tt> and <em>RStudio</em></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-arosur.html"><a href="2-arosur.html"><i class="fa fa-check"></i><b>2</b> A Review of Statistics using R</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-estimation-of-the-population-mean.html"><a href="2-1-estimation-of-the-population-mean.html"><i class="fa fa-check"></i><b>2.1</b> Estimation of the Population Mean</a></li>
<li class="chapter" data-level="2.2" data-path="2-2-potsm.html"><a href="2-2-potsm.html"><i class="fa fa-check"></i><b>2.2</b> Properties of the Sample Mean</a></li>
<li class="chapter" data-level="2.3" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html"><i class="fa fa-check"></i><b>2.3</b> Hypothesis Tests Concerning the Population Mean</a><ul>
<li class="chapter" data-level="" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html#the-p-value"><i class="fa fa-check"></i>The p-Value</a></li>
<li class="chapter" data-level="" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html#calculating-the-p-value-when-the-standard-deviation-is-known"><i class="fa fa-check"></i>Calculating the p-Value when the Standard Deviation is Known</a></li>
<li class="chapter" data-level="" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html#SVSSDASE"><i class="fa fa-check"></i>Sample Variance, Sample Standard Deviation and Standard Error</a></li>
<li class="chapter" data-level="" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html#calculating-the-p-value-when-the-standard-deviation-is-unknown"><i class="fa fa-check"></i>Calculating the p-value When the Standard Deviation is Unknown</a></li>
<li class="chapter" data-level="" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html#the-t-statistic"><i class="fa fa-check"></i>The t-statistic</a></li>
<li class="chapter" data-level="" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html#hypothesis-testing-with-a-prespecified-significance-level"><i class="fa fa-check"></i>Hypothesis Testing with a Prespecified Significance Level</a></li>
<li class="chapter" data-level="" data-path="2-3-hypothesis-tests-concerning-the-population-mean.html"><a href="2-3-hypothesis-tests-concerning-the-population-mean.html#one-sided-alternatives"><i class="fa fa-check"></i>One-sided Alternatives</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-4-confidence-intervals-for-the-population-mean.html"><a href="2-4-confidence-intervals-for-the-population-mean.html"><i class="fa fa-check"></i><b>2.4</b> Confidence Intervals for the Population Mean</a></li>
<li class="chapter" data-level="2.5" data-path="2-5-cmfdp.html"><a href="2-5-cmfdp.html"><i class="fa fa-check"></i><b>2.5</b> Comparing Means from Different Populations</a></li>
<li class="chapter" data-level="2.6" data-path="2-6-aattggoe.html"><a href="2-6-aattggoe.html"><i class="fa fa-check"></i><b>2.6</b> An Application to the Gender Gap of Earnings</a></li>
<li class="chapter" data-level="2.7" data-path="2-7-scatterplots-sample-covariance-and-sample-correlation.html"><a href="2-7-scatterplots-sample-covariance-and-sample-correlation.html"><i class="fa fa-check"></i><b>2.7</b> Scatterplots, Sample Covariance and Sample Correlation</a></li>
<li class="chapter" data-level="2.8" data-path="2-8-exercises.html"><a href="2-8-exercises.html"><i class="fa fa-check"></i><b>2.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Econometrics with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div class = rmdreview>
This book is in <b>Open Review</b>. We want your feedback to make the book better for you and other students. You may annotate some text by <span style="background-color: #3297FD; color: white">selecting it with the cursor</span> and then click the <i class="h-icon-annotate"></i> on the pop-up menu. You can also see the annotations of others: click the <i class="h-icon-chevron-left"></i> in the upper right hand corner of the page <i class="fa fa-arrow-circle-right  fa-rotate-315" aria-hidden="true"></i>
</div>
<div id="aattggoe" class="section level2">
<h2><span class="header-section-number">2.6</span> An Application to the Gender Gap of Earnings</h2>
<p>This section discusses how to reproduce the results presented in the box <em>The Gender Gap of Earnings of College Graduates in the United States</em> of the book.</p>
<p>In order to reproduce Table 3.1 of the book you need to download the replication data which are hosted by Pearson and can be downloaded <a href="https://wps.pearsoned.com/wps/media/objects/11422/11696965/datasets3e/datasets/cps_ch3.xlsx">here</a>. This file contains data that range from <span class="math inline">\(1992\)</span> to <span class="math inline">\(2008\)</span> and earnings are reported in prices of <span class="math inline">\(2008\)</span>.</p>
<p>There are several ways to import the <tt>.xlsx</tt>-files into <tt>R</tt>. Our suggestion is the function <tt>read_excel()</tt> from the <tt>readxl</tt> package <span class="citation">(Wickham &amp; Bryan, <a href="#ref-R-readxl" role="doc-biblioref">2019</a>)</span>. The package is not part of <tt>R</tt>’s base version and has to be installed manually.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="2-6-aattggoe.html#cb32-1"></a><span class="co"># load the &#39;readxl&#39; package</span></span>
<span id="cb32-2"><a href="2-6-aattggoe.html#cb32-2"></a><span class="kw">library</span>(readxl)</span></code></pre></div>
<p>You are now ready to import the dataset. Make sure you use the correct path to import the downloaded file! In our example, the file is saved in a subfolder of the working directory named <tt>data</tt>. If you are not sure what your current working directory is, use <tt>getwd()</tt>, see also <tt>?getwd</tt>. This will give you the path that points to the place <tt>R</tt> is currently looking for files to work with.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="2-6-aattggoe.html#cb33-1"></a><span class="co"># import the data into R</span></span>
<span id="cb33-2"><a href="2-6-aattggoe.html#cb33-2"></a>cps &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="dt">path =</span> <span class="st">&quot;data/cps_ch3.xlsx&quot;</span>)</span></code></pre></div>
<p>Next, install and load the package <tt>dyplr</tt> <span class="citation">(Wickham, François, Henry, &amp; Müller, <a href="#ref-R-dplyr" role="doc-biblioref">2020</a>)</span>. This package provides some handy functions that simplify data wrangling a lot. It makes use of the <tt>%&gt;%</tt> operator.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="2-6-aattggoe.html#cb34-1"></a><span class="co"># load the &#39;dplyr&#39; package</span></span>
<span id="cb34-2"><a href="2-6-aattggoe.html#cb34-2"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<p>First, get an overview over the dataset. Next, use <tt>%&gt;%</tt> and some functions from the <tt>dplyr</tt> package to group the observations by gender and year and compute descriptive statistics for both groups.</p>
<div class="unfolded">
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="2-6-aattggoe.html#cb35-1"></a><span class="co"># get an overview of the data structure</span></span>
<span id="cb35-2"><a href="2-6-aattggoe.html#cb35-2"></a><span class="kw">head</span>(cps)</span>
<span id="cb35-3"><a href="2-6-aattggoe.html#cb35-3"></a><span class="co">#&gt; # A tibble: 6 x 3</span></span>
<span id="cb35-4"><a href="2-6-aattggoe.html#cb35-4"></a><span class="co">#&gt;   a_sex  year ahe08</span></span>
<span id="cb35-5"><a href="2-6-aattggoe.html#cb35-5"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb35-6"><a href="2-6-aattggoe.html#cb35-6"></a><span class="co">#&gt; 1     1  1992  17.2</span></span>
<span id="cb35-7"><a href="2-6-aattggoe.html#cb35-7"></a><span class="co">#&gt; 2     1  1992  15.3</span></span>
<span id="cb35-8"><a href="2-6-aattggoe.html#cb35-8"></a><span class="co">#&gt; 3     1  1992  22.9</span></span>
<span id="cb35-9"><a href="2-6-aattggoe.html#cb35-9"></a><span class="co">#&gt; 4     2  1992  13.3</span></span>
<span id="cb35-10"><a href="2-6-aattggoe.html#cb35-10"></a><span class="co">#&gt; 5     1  1992  22.1</span></span>
<span id="cb35-11"><a href="2-6-aattggoe.html#cb35-11"></a><span class="co">#&gt; 6     2  1992  12.2</span></span>
<span id="cb35-12"><a href="2-6-aattggoe.html#cb35-12"></a></span>
<span id="cb35-13"><a href="2-6-aattggoe.html#cb35-13"></a><span class="co"># group data by gender and year and compute the mean, standard deviation</span></span>
<span id="cb35-14"><a href="2-6-aattggoe.html#cb35-14"></a><span class="co"># and number of observations for each group</span></span>
<span id="cb35-15"><a href="2-6-aattggoe.html#cb35-15"></a>avgs &lt;-<span class="st"> </span>cps <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb35-16"><a href="2-6-aattggoe.html#cb35-16"></a><span class="st">        </span><span class="kw">group_by</span>(a_sex, year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb35-17"><a href="2-6-aattggoe.html#cb35-17"></a><span class="st">        </span><span class="kw">summarise</span>(<span class="kw">mean</span>(ahe08), </span>
<span id="cb35-18"><a href="2-6-aattggoe.html#cb35-18"></a>                  <span class="kw">sd</span>(ahe08), </span>
<span id="cb35-19"><a href="2-6-aattggoe.html#cb35-19"></a>                  <span class="kw">n</span>())</span>
<span id="cb35-20"><a href="2-6-aattggoe.html#cb35-20"></a></span>
<span id="cb35-21"><a href="2-6-aattggoe.html#cb35-21"></a><span class="co"># print the results to the console</span></span>
<span id="cb35-22"><a href="2-6-aattggoe.html#cb35-22"></a><span class="kw">print</span>(avgs)</span>
<span id="cb35-23"><a href="2-6-aattggoe.html#cb35-23"></a><span class="co">#&gt; # A tibble: 10 x 5</span></span>
<span id="cb35-24"><a href="2-6-aattggoe.html#cb35-24"></a><span class="co">#&gt; # Groups:   a_sex [2]</span></span>
<span id="cb35-25"><a href="2-6-aattggoe.html#cb35-25"></a><span class="co">#&gt;    a_sex  year `mean(ahe08)` `sd(ahe08)` `n()`</span></span>
<span id="cb35-26"><a href="2-6-aattggoe.html#cb35-26"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt;</span></span>
<span id="cb35-27"><a href="2-6-aattggoe.html#cb35-27"></a><span class="co">#&gt;  1     1  1992          23.3       10.2   1594</span></span>
<span id="cb35-28"><a href="2-6-aattggoe.html#cb35-28"></a><span class="co">#&gt;  2     1  1996          22.5       10.1   1379</span></span>
<span id="cb35-29"><a href="2-6-aattggoe.html#cb35-29"></a><span class="co">#&gt;  3     1  2000          24.9       11.6   1303</span></span>
<span id="cb35-30"><a href="2-6-aattggoe.html#cb35-30"></a><span class="co">#&gt;  4     1  2004          25.1       12.0   1894</span></span>
<span id="cb35-31"><a href="2-6-aattggoe.html#cb35-31"></a><span class="co">#&gt;  5     1  2008          25.0       11.8   1838</span></span>
<span id="cb35-32"><a href="2-6-aattggoe.html#cb35-32"></a><span class="co">#&gt;  6     2  1992          20.0        7.87  1368</span></span>
<span id="cb35-33"><a href="2-6-aattggoe.html#cb35-33"></a><span class="co">#&gt;  7     2  1996          19.0        7.95  1230</span></span>
<span id="cb35-34"><a href="2-6-aattggoe.html#cb35-34"></a><span class="co">#&gt;  8     2  2000          20.7        9.36  1181</span></span>
<span id="cb35-35"><a href="2-6-aattggoe.html#cb35-35"></a><span class="co">#&gt;  9     2  2004          21.0        9.36  1735</span></span>
<span id="cb35-36"><a href="2-6-aattggoe.html#cb35-36"></a><span class="co">#&gt; 10     2  2008          20.9        9.66  1871</span></span></code></pre></div>
</div>
<p>With the pipe operator <tt>%&gt;%</tt> we simply chain different <tt>R</tt> functions that produce compatible input and output. In the code above, we take the dataset <tt>cps</tt> and use it as an input for the function <tt>group_by()</tt>. The output of <tt>group_by</tt> is subsequently used as an input for <tt>summarise()</tt> and so forth.</p>
<p>Now that we have computed the statistics of interest for both genders, we can investigate how the gap in earnings between both groups evolves over time.</p>
<div class="unfolded">
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="2-6-aattggoe.html#cb36-1"></a><span class="co"># split the dataset by gender</span></span>
<span id="cb36-2"><a href="2-6-aattggoe.html#cb36-2"></a>male &lt;-<span class="st"> </span>avgs <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(a_sex <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) </span>
<span id="cb36-3"><a href="2-6-aattggoe.html#cb36-3"></a></span>
<span id="cb36-4"><a href="2-6-aattggoe.html#cb36-4"></a>female &lt;-<span class="st"> </span>avgs <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">filter</span>(a_sex <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb36-5"><a href="2-6-aattggoe.html#cb36-5"></a></span>
<span id="cb36-6"><a href="2-6-aattggoe.html#cb36-6"></a><span class="co"># rename columns of both splits</span></span>
<span id="cb36-7"><a href="2-6-aattggoe.html#cb36-7"></a><span class="kw">colnames</span>(male)   &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Sex&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Y_bar_m&quot;</span>, <span class="st">&quot;s_m&quot;</span>, <span class="st">&quot;n_m&quot;</span>)</span>
<span id="cb36-8"><a href="2-6-aattggoe.html#cb36-8"></a><span class="kw">colnames</span>(female) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Sex&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Y_bar_f&quot;</span>, <span class="st">&quot;s_f&quot;</span>, <span class="st">&quot;n_f&quot;</span>)</span>
<span id="cb36-9"><a href="2-6-aattggoe.html#cb36-9"></a></span>
<span id="cb36-10"><a href="2-6-aattggoe.html#cb36-10"></a><span class="co"># estimate gender gaps, compute standard errors and confidence intervals for all dates</span></span>
<span id="cb36-11"><a href="2-6-aattggoe.html#cb36-11"></a>gap &lt;-<span class="st"> </span>male<span class="op">$</span>Y_bar_m <span class="op">-</span><span class="st"> </span>female<span class="op">$</span>Y_bar_f</span>
<span id="cb36-12"><a href="2-6-aattggoe.html#cb36-12"></a></span>
<span id="cb36-13"><a href="2-6-aattggoe.html#cb36-13"></a>gap_se &lt;-<span class="st"> </span><span class="kw">sqrt</span>(male<span class="op">$</span>s_m<span class="op">^</span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span>male<span class="op">$</span>n_m <span class="op">+</span><span class="st"> </span>female<span class="op">$</span>s_f<span class="op">^</span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span>female<span class="op">$</span>n_f)</span>
<span id="cb36-14"><a href="2-6-aattggoe.html#cb36-14"></a></span>
<span id="cb36-15"><a href="2-6-aattggoe.html#cb36-15"></a>gap_ci_l &lt;-<span class="st"> </span>gap <span class="op">-</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>gap_se</span>
<span id="cb36-16"><a href="2-6-aattggoe.html#cb36-16"></a></span>
<span id="cb36-17"><a href="2-6-aattggoe.html#cb36-17"></a>gap_ci_u &lt;-<span class="st"> </span>gap <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span>gap_se</span>
<span id="cb36-18"><a href="2-6-aattggoe.html#cb36-18"></a></span>
<span id="cb36-19"><a href="2-6-aattggoe.html#cb36-19"></a>result &lt;-<span class="st"> </span><span class="kw">cbind</span>(male[,<span class="op">-</span><span class="dv">1</span>], female[,<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)], gap, gap_se, gap_ci_l, gap_ci_u)</span>
<span id="cb36-20"><a href="2-6-aattggoe.html#cb36-20"></a></span>
<span id="cb36-21"><a href="2-6-aattggoe.html#cb36-21"></a><span class="co"># print the results to the console</span></span>
<span id="cb36-22"><a href="2-6-aattggoe.html#cb36-22"></a><span class="kw">print</span>(result, <span class="dt">digits =</span> <span class="dv">3</span>)</span>
<span id="cb36-23"><a href="2-6-aattggoe.html#cb36-23"></a><span class="co">#&gt;   Year Y_bar_m  s_m  n_m Y_bar_f  s_f  n_f  gap gap_se gap_ci_l gap_ci_u</span></span>
<span id="cb36-24"><a href="2-6-aattggoe.html#cb36-24"></a><span class="co">#&gt; 1 1992    23.3 10.2 1594    20.0 7.87 1368 3.23  0.332     2.58     3.88</span></span>
<span id="cb36-25"><a href="2-6-aattggoe.html#cb36-25"></a><span class="co">#&gt; 2 1996    22.5 10.1 1379    19.0 7.95 1230 3.49  0.354     2.80     4.19</span></span>
<span id="cb36-26"><a href="2-6-aattggoe.html#cb36-26"></a><span class="co">#&gt; 3 2000    24.9 11.6 1303    20.7 9.36 1181 4.14  0.421     3.32     4.97</span></span>
<span id="cb36-27"><a href="2-6-aattggoe.html#cb36-27"></a><span class="co">#&gt; 4 2004    25.1 12.0 1894    21.0 9.36 1735 4.10  0.356     3.40     4.80</span></span>
<span id="cb36-28"><a href="2-6-aattggoe.html#cb36-28"></a><span class="co">#&gt; 5 2008    25.0 11.8 1838    20.9 9.66 1871 4.10  0.354     3.41     4.80</span></span></code></pre></div>
</div>
<p>We observe virtually the same results as the ones presented in the book. The computed statistics suggest that there <em>is</em> a gender gap in earnings. Note that we can reject the null hypothesis that the gap is zero for all periods. Further, estimates of the gap and bounds of the <span class="math inline">\(95\%\)</span> confidence intervals indicate that the gap has been quite stable in the recent past.</p>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-readxl">
<p>Wickham, H., &amp; Bryan, J. (2019). readxl: Read Excel Files (Version 1.3.1). Retrieved from <a href="https://CRAN.R-project.org/package=readxl">https://CRAN.R-project.org/package=readxl</a></p>
</div>
<div id="ref-R-dplyr">
<p>Wickham, H., François, R., Henry, L., &amp; Müller, K. (2020). dplyr: A Grammar of Data Manipulation (Version 1.0.0). Retrieved from <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="2-5-cmfdp.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="2-7-scatterplots-sample-covariance-and-sample-correlation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/mca91/EconometricsWithR/edit/master/03-ch3.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ITER.pdf"],
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
